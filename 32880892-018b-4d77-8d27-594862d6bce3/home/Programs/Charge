local component = require("component")
local sides = require("sides")
local navigation = component.navigation
local chargerRelPos = {x=-45.5, y=68.5, z=-57.5}

--[[
    Back:   north,  negZ,   Number: 2
    Front:  south,  posZ,   Number: 3
    Right:  west,   negX,   Number: 4
    Left:   east,   posX,   Number: 5
]]--

-- Will face towards a given side
local function FaceSide(side)
    local robotFacing = navigation.getFacing()
    print("Currently facing towards " .. robotFacing)
    print("Starting to face towards " .. side .. "...")
    robot.turnLeft()
end

-- Will return a direction between two vectors
local function GetTargetDirection(target)
    local tempX,_,tempZ = navigation.getPosition()
    local relPos = {x = tempX, z = tempZ}
    local diff = {x = target.x-relPos.x , z = target.z-relPos.z}

    print("Relative Position: x = " .. relPos.x .. ", z = " .. relPos.z)
    print("Target Position: x = " .. target.x .. ", z = " .. target.z)
    print("diff.x = " .. diff.x .. " diff.z = " .. diff.z)

    if math.abs(diff.x) > math.abs(diff.z) then
        if diff.x < 0 then return sides.negx else return sides.posx end
    else
        if diff.z < 0 then return sides.negz else return sides.posz end
    end
end

local function FaceTarget(target)
    direction = GetTargetDirection(target)
    FaceSide(direction)
end

local function GoToTarget(target)
    local relPos = navigation.getPosition()
    
end

FaceTarget(chargerRelPos)